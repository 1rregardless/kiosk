(function(){define(function(require){return class{constructor(e,a){this.message=e,this.readinessCallback=a,this.payload=JSON.parse(this.message.payload)}run(){return this.canWriteToChromeStorageLocal(),this.sendReadinessResponse()}sendReadinessResponse(){return this.message.payload=JSON.stringify(this.payload),this.readinessCallback(this.message)}canWriteToChromeStorageLocal(){var e,a,s;return a=Date.now().toString(),s=Math.random(),(e={})[a]=s,chrome.storage.local.set(e,()=>(null!=chrome.runtime.lastError?this._failStorageLocalCheck():chrome.storage.local.get(a,e=>e[a]===s?this._passStorageLocalCheck():this._failStorageLocalCheck()),chrome.storage.local.remove(a)))}_passStorageLocalCheck(){return this.payload.push(this._createStorageLocalCheckPayload({canWrite:!0,readinessMsg:"You can read from & write to chrome.storage.local"}))}_failStorageLocalCheck(){var e;return this.payload.push(this._createStorageLocalCheckPayload({canWrite:!1,readinessMsg:null!=(e=chrome.runtime.lastError)?e:"There was an error accessing chrome.storage.local"}))}_createStorageLocalCheckPayload(e){return{testName:"Storage Permissions",pass:e.canWrite,text:{description:"Verifies R/W access to local storage.",detail:"The system must allow reading from and writing to chrome.storage.local",message:e.readinessMsg},className:"DRCReadinessTests",version:"1.0",required:1,selected:0,userInteraction:0,client:1,installer:1,studentLogin:1,clientStartup:0}}}})}).call(this);